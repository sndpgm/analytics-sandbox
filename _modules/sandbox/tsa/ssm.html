
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>sandbox.tsa.ssm &#8212; Analytics Study Blog</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" href="../../../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-codeautolink.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../../_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Analytics Study Blog</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../../intro.html">
                    Welcome to my Analytics Sandbox
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  確率変数と確率分布
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../analytics/distribution/rvs.html">
   確率変数
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../analytics/distribution/dist.html">
   確率分布
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../analytics/distribution/mdist.html">
   多変量確率分布
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  回帰モデル
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../analytics/regression/blm.html">
   ベイズ線形回帰モデル
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  時系列モデル
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../analytics/tsa/ts.html">
   時系列データ
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../analytics/tsa/arma.html">
   ARMAモデル系
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../analytics/tsa/arima.html">
   ARIMAモデル系
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../analytics/tsa/ssm.html">
   状態空間モデル
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  補足
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../analytics/math/calculus.html">
   微分積分学
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../analytics/math/linear_algebra.html">
   線形代数学
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  API Documentation
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../../api/sandbox/index.html">
   <code class="xref py py-mod docutils literal notranslate">
    <span class="pre">
     sandbox
    </span>
   </code>
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../../api/sandbox/datamodel/index.html">
     <code class="xref py py-mod docutils literal notranslate">
      <span class="pre">
       sandbox.datamodel
      </span>
     </code>
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
    <label for="toctree-checkbox-2">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../api/sandbox/datamodel/base/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         sandbox.datamodel.base
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../api/sandbox/datamodel/ts_datamodel/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         sandbox.datamodel.ts_datamodel
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../api/sandbox/datamodel/ts_simulator/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         sandbox.datamodel.ts_simulator
        </span>
       </code>
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../../api/sandbox/datasets/index.html">
     <code class="xref py py-mod docutils literal notranslate">
      <span class="pre">
       sandbox.datasets
      </span>
     </code>
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
    <label for="toctree-checkbox-3">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../../api/sandbox/datasets/air_passengers/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         sandbox.datasets.air_passengers
        </span>
       </code>
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
      <label for="toctree-checkbox-4">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../../api/sandbox/datasets/air_passengers/data/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           sandbox.datasets.air_passengers.data
          </span>
         </code>
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../../api/sandbox/datasets/blsallfood/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         sandbox.datasets.blsallfood
        </span>
       </code>
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
      <label for="toctree-checkbox-5">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../../api/sandbox/datasets/blsallfood/data/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           sandbox.datasets.blsallfood.data
          </span>
         </code>
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../../api/sandbox/datasets/hakusan/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         sandbox.datasets.hakusan
        </span>
       </code>
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
      <label for="toctree-checkbox-6">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../../api/sandbox/datasets/hakusan/data/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           sandbox.datasets.hakusan.data
          </span>
         </code>
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../../api/sandbox/datasets/maxtemp/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         sandbox.datasets.maxtemp
        </span>
       </code>
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
      <label for="toctree-checkbox-7">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../../api/sandbox/datasets/maxtemp/data/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           sandbox.datasets.maxtemp.data
          </span>
         </code>
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../../api/sandbox/datasets/mye1f/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         sandbox.datasets.mye1f
        </span>
       </code>
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
      <label for="toctree-checkbox-8">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../../api/sandbox/datasets/mye1f/data/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           sandbox.datasets.mye1f.data
          </span>
         </code>
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../../api/sandbox/datasets/nikkei225/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         sandbox.datasets.nikkei225
        </span>
       </code>
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
      <label for="toctree-checkbox-9">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../../api/sandbox/datasets/nikkei225/data/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           sandbox.datasets.nikkei225.data
          </span>
         </code>
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../../api/sandbox/datasets/rtf/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         sandbox.datasets.rtf
        </span>
       </code>
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
      <label for="toctree-checkbox-10">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../../api/sandbox/datasets/rtf/data/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           sandbox.datasets.rtf.data
          </span>
         </code>
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../../api/sandbox/datasets/whard/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         sandbox.datasets.whard
        </span>
       </code>
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
      <label for="toctree-checkbox-11">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../../api/sandbox/datasets/whard/data/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           sandbox.datasets.whard.data
          </span>
         </code>
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../api/sandbox/datasets/utils/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         sandbox.datasets.utils
        </span>
       </code>
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../../api/sandbox/graphics/index.html">
     <code class="xref py py-mod docutils literal notranslate">
      <span class="pre">
       sandbox.graphics
      </span>
     </code>
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/>
    <label for="toctree-checkbox-12">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../api/sandbox/graphics/ts_grapher/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         sandbox.graphics.ts_grapher
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../api/sandbox/graphics/utils/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         sandbox.graphics.utils
        </span>
       </code>
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../../api/sandbox/metrics/index.html">
     <code class="xref py py-mod docutils literal notranslate">
      <span class="pre">
       sandbox.metrics
      </span>
     </code>
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/>
    <label for="toctree-checkbox-13">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../api/sandbox/metrics/score/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         sandbox.metrics.score
        </span>
       </code>
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../../api/sandbox/tests/index.html">
     <code class="xref py py-mod docutils literal notranslate">
      <span class="pre">
       sandbox.tests
      </span>
     </code>
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/>
    <label for="toctree-checkbox-14">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../../api/sandbox/tests/datasets/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         sandbox.tests.datasets
        </span>
       </code>
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/>
      <label for="toctree-checkbox-15">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../../api/sandbox/tests/datasets/test_utils/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           sandbox.tests.datasets.test_utils
          </span>
         </code>
        </a>
       </li>
      </ul>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../../api/sandbox/tsa/index.html">
     <code class="xref py py-mod docutils literal notranslate">
      <span class="pre">
       sandbox.tsa
      </span>
     </code>
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/>
    <label for="toctree-checkbox-16">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../api/sandbox/tsa/base/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         sandbox.tsa.base
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../api/sandbox/tsa/sarimax/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         sandbox.tsa.sarimax
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../api/sandbox/tsa/ssm/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         sandbox.tsa.ssm
        </span>
       </code>
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../../api/sandbox/utils/index.html">
     <code class="xref py py-mod docutils literal notranslate">
      <span class="pre">
       sandbox.utils
      </span>
     </code>
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" type="checkbox"/>
    <label for="toctree-checkbox-17">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../api/sandbox/utils/tools/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         sandbox.utils.tools
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../api/sandbox/utils/validation/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         sandbox.utils.validation
        </span>
       </code>
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/sndpgm/analytics-sandbox"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/sndpgm/analytics-sandbox/issues/new?title=Issue%20on%20page%20%2F_modules/sandbox/tsa/ssm.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1></h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <h1>Source code for sandbox.tsa.ssm</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;State space model.&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="kn">from</span> <span class="nn">sandbox.datamodel.base</span> <span class="kn">import</span> <span class="n">get_1d_arr</span>
<span class="kn">from</span> <span class="nn">sandbox.datamodel.ts_datamodel</span> <span class="kn">import</span> <span class="n">TimeSeriesModelData</span>
<span class="kn">from</span> <span class="nn">sandbox.graphics.ts_grapher</span> <span class="kn">import</span> <span class="n">TimeSeriesGrapherMixin</span>
<span class="kn">from</span> <span class="nn">sandbox.tsa.base</span> <span class="kn">import</span> <span class="n">BaseTimeSeriesModel</span>


<div class="viewcode-block" id="LinearGaussianStateSpaceModel"><a class="viewcode-back" href="../../../api/sandbox/tsa/ssm/index.html#sandbox.tsa.ssm.LinearGaussianStateSpaceModel">[docs]</a><span class="k">class</span> <span class="nc">LinearGaussianStateSpaceModel</span><span class="p">(</span><span class="n">BaseTimeSeriesModel</span><span class="p">,</span> <span class="n">TimeSeriesGrapherMixin</span><span class="p">):</span>
    <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Linear Gaussian state space model.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    level : bool, optional</span>
<span class="sd">        Whether to include a level component. Default is False.</span>
<span class="sd">    trend : bool, optional</span>
<span class="sd">        Whether to include a trend component. Default is False. If True,</span>
<span class="sd">        `level` must also be True.</span>
<span class="sd">    seasonal : {int, None}, optional</span>
<span class="sd">        The period of the seasonal component, if any. Default is None.</span>
<span class="sd">    freq_seasonal : {list[dict], None}, optional.</span>
<span class="sd">        Whether (and how) to model seasonal component(s) with trig. functions.</span>
<span class="sd">        If specified, there is one dictionary for each frequency-domain</span>
<span class="sd">        seasonal component.  Each dictionary must have the key, value pair for</span>
<span class="sd">        &#39;period&#39; -- integer and may have a key, value pair for</span>
<span class="sd">        &#39;harmonics&#39; -- integer. If &#39;harmonics&#39; is not specified in any of the</span>
<span class="sd">        dictionaries, it defaults to the floor of period/2.</span>
<span class="sd">    cycle : bool, optional</span>
<span class="sd">        Whether to include a cycle component. Default is False.</span>
<span class="sd">    autoregressive : {int, None}, optional</span>
<span class="sd">        The order of the autoregressive component. Default is None.</span>
<span class="sd">    irregular : bool, optional</span>
<span class="sd">        Whether to include an irregular component. Default is False.</span>
<span class="sd">    stochastic_level : bool, optional</span>
<span class="sd">        Whether any level component is stochastic. Default is False.</span>
<span class="sd">    stochastic_trend : bool, optional</span>
<span class="sd">        Whether any trend component is stochastic. Default is False.</span>
<span class="sd">    stochastic_seasonal : bool, optional</span>
<span class="sd">        Whether any seasonal component is stochastic. Default is True.</span>
<span class="sd">    stochastic_freq_seasonal : list[bool], optional</span>
<span class="sd">        Whether each seasonal component(s) is (are) stochastic.  Default</span>
<span class="sd">        is True for each component.  The list should be of the same length as</span>
<span class="sd">        freq_seasonal.</span>
<span class="sd">    stochastic_cycle : bool, optional</span>
<span class="sd">        Whether any cycle component is stochastic. Default is False.</span>
<span class="sd">    damped_cycle : bool, optional</span>
<span class="sd">        Whether the cycle component is damped. Default is False.</span>
<span class="sd">    cycle_period_bounds : tuple, optional</span>
<span class="sd">        A tuple with lower and upper allowed bounds for the period of the</span>
<span class="sd">        cycle. If not provided, the following default bounds are used:</span>
<span class="sd">        (1) if no date / time information is provided, the frequency is</span>
<span class="sd">        constrained to be between zero and :math:`\pi`, so the period is</span>
<span class="sd">        constrained to be in [0.5, infinity].</span>
<span class="sd">        (2) If the date / time information is provided, the default bounds</span>
<span class="sd">        allow the cyclical component to be between 1.5 and 12 years; depending</span>
<span class="sd">        on the frequency of the endogenous variable, this will imply different</span>
<span class="sd">        specific bounds.</span>
<span class="sd">    mle_regression : bool, optional</span>
<span class="sd">        Whether to estimate regression coefficients by maximum likelihood</span>
<span class="sd">        as one of hyperparameters. Default is True.</span>
<span class="sd">        If False, the regression coefficients are estimated by recursive OLS,</span>
<span class="sd">        included in the state vector.</span>
<span class="sd">    use_exact_diffuse : bool, optional</span>
<span class="sd">        Whether to use exact diffuse initialization for non-stationary</span>
<span class="sd">        states. Default is False (in which case approximate diffuse</span>
<span class="sd">        initialization is used).</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; from sandbox.datamodel.ts_simulator import UnobservedComponentsSimulator</span>
<span class="sd">    &gt;&gt;&gt; from sandbox.tsa.ssm import LinearGaussianStateSpaceModel</span>
<span class="sd">    &gt;&gt;&gt; # Simulation data</span>
<span class="sd">    &gt;&gt;&gt; sim = UnobservedComponentsSimulator(</span>
<span class="sd">    &gt;&gt;&gt;     steps=400,</span>
<span class="sd">    &gt;&gt;&gt;     level=True,</span>
<span class="sd">    &gt;&gt;&gt;     trend=True,</span>
<span class="sd">    &gt;&gt;&gt;     freq_seasonal=[{&quot;period&quot;: 50, &quot;harmonics&quot;: 4}, {&quot;period&quot;: 100, &quot;harmonics&quot;: 6}],</span>
<span class="sd">    &gt;&gt;&gt;     exog_params=[5, ],</span>
<span class="sd">    &gt;&gt;&gt;     start_param_level=10,</span>
<span class="sd">    &gt;&gt;&gt;     stddev_level=0.001,</span>
<span class="sd">    &gt;&gt;&gt;     stddev_trend=0.01,</span>
<span class="sd">    &gt;&gt;&gt;     stddev_freq_seasonal=[0.01, 0.01],</span>
<span class="sd">    &gt;&gt;&gt; )</span>
<span class="sd">    &gt;&gt;&gt; ret = sim.simulate()</span>
<span class="sd">    &gt;&gt;&gt; # Split data</span>
<span class="sd">    &gt;&gt;&gt; X_train, X_test, y_train, y_test = train_test_split(ret.exog, ret.endog, test_size=0.10, shuffle=False)</span>
<span class="sd">    &gt;&gt;&gt; model = LinearGaussianStateSpaceModel(</span>
<span class="sd">    &gt;&gt;&gt;     level=True,</span>
<span class="sd">    &gt;&gt;&gt;     trend=True,</span>
<span class="sd">    &gt;&gt;&gt;     freq_seasonal=[{&quot;period&quot;: 12, &quot;harmonics&quot;: 4}, {&quot;period&quot;: 100, &quot;harmonics&quot;: 6}],</span>
<span class="sd">    &gt;&gt;&gt; )</span>
<span class="sd">    &gt;&gt;&gt; model.fit(X_train, y_train)</span>
<span class="sd">    Out[1]:</span>
<span class="sd">    LinearGaussianStateSpaceModel(freq_seasonal=[{&#39;harmonics&#39;: 4, &#39;period&#39;: 12},</span>
<span class="sd">                                                 {&#39;harmonics&#39;: 6, &#39;period&#39;: 100}],</span>
<span class="sd">                                  level=True, trend=True)</span>
<span class="sd">    &gt;&gt;&gt; model.score(X_test, y_test)</span>
<span class="sd">    Out[2]: 0.9834446210596552</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    These models take the general form (see [1]_ Chapter 3.2 for all details)</span>

<span class="sd">    .. math::</span>

<span class="sd">        y_t = \mu_t + \gamma_t + c_t + \varepsilon_t</span>

<span class="sd">    where :math:`y_t` refers to the observation vector at time :math:`t`,</span>
<span class="sd">    :math:`\mu_t` refers to the trend component, :math:`\gamma_t` refers to the</span>
<span class="sd">    seasonal component, :math:`c_t` refers to the cycle, and</span>
<span class="sd">    :math:`\varepsilon_t` is the irregular. The modeling details of these</span>
<span class="sd">    components are given below.</span>

<span class="sd">    **Trend**</span>

<span class="sd">    The trend component is a dynamic extension of a regression model that</span>
<span class="sd">    includes an intercept and linear time-trend. It can be written:</span>

<span class="sd">    .. math::</span>

<span class="sd">        \mu_t &amp;= \mu_{t-1} + \beta_{t-1} + \eta_{t-1} \\</span>
<span class="sd">        \beta_t &amp;= \beta_{t-1} + \zeta_{t-1}</span>

<span class="sd">    where the level is a generalization of the intercept term that can</span>
<span class="sd">    dynamically vary across time, and the trend is a generalization of the</span>
<span class="sd">    time-trend such that the slope can dynamically vary across time.</span>

<span class="sd">    Here :math:`\eta_t \sim N(0, \sigma_\eta^2)` and</span>
<span class="sd">    :math:`\zeta_t \sim N(0, \sigma_\zeta^2)`.</span>

<span class="sd">    For both elements (level and trend), we can consider models in which:</span>

<span class="sd">    - The element is included vs excluded (if the trend is included, there must</span>
<span class="sd">      also be a level included).</span>
<span class="sd">    - The element is deterministic vs stochastic (i.e. whether or not the</span>
<span class="sd">      variance on the error term is confined to be zero or not)</span>

<span class="sd">    The only additional parameters to be estimated via MLE are the variances of</span>
<span class="sd">    any included stochastic components.</span>

<span class="sd">    **Seasonal (Time-domain)**</span>

<span class="sd">    The seasonal component is modeled as:</span>

<span class="sd">    .. math::</span>

<span class="sd">        \gamma_t = - \sum_{j=1}^{s-1} \gamma_{t+1-j} + \omega_t \\</span>
<span class="sd">        \omega_t \sim N(0, \sigma_\omega^2)</span>

<span class="sd">    The periodicity (number of seasons) is s, and the defining character is</span>
<span class="sd">    that (without the error term), the seasonal components sum to zero across</span>
<span class="sd">    one complete cycle. The inclusion of an error term allows the seasonal</span>
<span class="sd">    effects to vary over time (if this is not desired, :math:`\sigma_\omega^2`</span>
<span class="sd">    can be set to zero using the `stochastic_seasonal=False` keyword argument).</span>

<span class="sd">    This component results in one parameter to be selected via maximum</span>
<span class="sd">    likelihood: :math:`\sigma_\omega^2`, and one parameter to be chosen, the</span>
<span class="sd">    number of seasons `s`.</span>

<span class="sd">    Following the fitting of the model, the unobserved seasonal component</span>
<span class="sd">    time series is available in the results class in the `seasonal`</span>
<span class="sd">    attribute.</span>

<span class="sd">    **Frequency-domain Seasonal**</span>

<span class="sd">    Each frequency-domain seasonal component is modeled as:</span>

<span class="sd">    .. math::</span>

<span class="sd">        \gamma_t &amp; =  \sum_{j=1}^h \gamma_{j, t} \\</span>
<span class="sd">        \gamma_{j, t+1} &amp; = \gamma_{j, t}\cos(\lambda_j)</span>
<span class="sd">                        + \gamma^{*}_{j, t}\sin(\lambda_j) + \omega_{j,t} \\</span>
<span class="sd">        \gamma^{*}_{j, t+1} &amp; = -\gamma^{(1)}_{j, t}\sin(\lambda_j)</span>
<span class="sd">                            + \gamma^{*}_{j, t}\cos(\lambda_j)</span>
<span class="sd">                            + \omega^{*}_{j, t}, \\</span>
<span class="sd">        \omega^{*}_{j, t}, \omega_{j, t} &amp; \sim N(0, \sigma_{\omega^2}) \\</span>
<span class="sd">        \lambda_j &amp; = \frac{2 \pi j}{s}</span>

<span class="sd">    where j ranges from 1 to h.</span>

<span class="sd">    The periodicity (number of &quot;seasons&quot; in a &quot;year&quot;) is s and the number of</span>
<span class="sd">    harmonics is h.  Note that h is configurable to be less than s/2, but</span>
<span class="sd">    s/2 harmonics is sufficient to fully model all seasonal variations of</span>
<span class="sd">    periodicity s.  Like the time domain seasonal term (cf. Seasonal section,</span>
<span class="sd">    above), the inclusion of the error terms allows for the seasonal effects to</span>
<span class="sd">    vary over time.  The argument stochastic_freq_seasonal can be used to set</span>
<span class="sd">    one or more of the seasonal components of this type to be non-random,</span>
<span class="sd">    meaning they will not vary over time.</span>

<span class="sd">    This component results in one parameter to be fitted using maximum</span>
<span class="sd">    likelihood: :math:`\sigma_{\omega^2}`, and up to two parameters to be</span>
<span class="sd">    chosen, the number of seasons s and optionally the number of harmonics</span>
<span class="sd">    h, with :math:`1 \leq h \leq \lfloor s/2 \rfloor`.</span>

<span class="sd">    After fitting the model, each unobserved seasonal component modeled in the</span>
<span class="sd">    frequency domain is available in the results class in the `freq_seasonal`</span>
<span class="sd">    attribute.</span>

<span class="sd">    **Cycle**</span>

<span class="sd">    The cyclical component is intended to capture cyclical effects at time</span>
<span class="sd">    frames much longer than captured by the seasonal component. For example,</span>
<span class="sd">    in economics the cyclical term is often intended to capture the business</span>
<span class="sd">    cycle, and is then expected to have a period between &quot;1.5 and 12 years&quot;</span>
<span class="sd">    (see Durbin and Koopman).</span>

<span class="sd">    .. math::</span>

<span class="sd">        c_{t+1} &amp; = \rho_c (\tilde c_t \cos \lambda_c t</span>
<span class="sd">                + \tilde c_t^* \sin \lambda_c) +</span>
<span class="sd">                \tilde \omega_t \\</span>
<span class="sd">        c_{t+1}^* &amp; = \rho_c (- \tilde c_t \sin \lambda_c  t +</span>
<span class="sd">                \tilde c_t^* \cos \lambda_c) +</span>
<span class="sd">                \tilde \omega_t^* \\</span>

<span class="sd">    where :math:`\omega_t, \tilde \omega_t iid N(0, \sigma_{\tilde \omega}^2)`</span>

<span class="sd">    The parameter :math:`\lambda_c` (the frequency of the cycle) is an</span>
<span class="sd">    additional parameter to be estimated by MLE.</span>
<span class="sd">    If the cyclical effect is stochastic (`stochastic_cycle=True`), then there</span>
<span class="sd">    is another parameter to estimate (the variance of the error term - note</span>
<span class="sd">    that both of the error terms here share the same variance, but are assumed</span>
<span class="sd">    to have independent draws).</span>

<span class="sd">    If the cycle is damped (`damped_cycle=True`), then there is a third</span>
<span class="sd">    parameter to estimate, :math:`\rho_c`.</span>

<span class="sd">    In order to achieve cycles with the appropriate frequencies, bounds are</span>
<span class="sd">    imposed on the parameter :math:`\lambda_c` in estimation. These can be</span>
<span class="sd">    controlled via the keyword argument `cycle_period_bounds`, which, if</span>
<span class="sd">    specified, must be a tuple of bounds on the **period** `(lower, upper)`.</span>
<span class="sd">    The bounds on the frequency are then calculated from those bounds.</span>

<span class="sd">    The default bounds, if none are provided, are selected in the following</span>
<span class="sd">    way:</span>

<span class="sd">    1. If no date / time information is provided, the frequency is</span>
<span class="sd">       constrained to be between zero and :math:`\pi`, so the period is</span>
<span class="sd">       constrained to be in :math:`[0.5, \infty]`.</span>
<span class="sd">    2. If the date / time information is provided, the default bounds</span>
<span class="sd">       allow the cyclical component to be between 1.5 and 12 years; depending</span>
<span class="sd">       on the frequency of the endogenous variable, this will imply different</span>
<span class="sd">       specific bounds.</span>

<span class="sd">    Following the fitting of the model, the unobserved cyclical component</span>
<span class="sd">    time series is available in the results class in the `cycle`</span>
<span class="sd">    attribute.</span>

<span class="sd">    **Irregular**</span>

<span class="sd">    The irregular components are independent and identically distributed (iid):</span>

<span class="sd">    .. math::</span>

<span class="sd">        \varepsilon_t \sim N(0, \sigma_\varepsilon^2)</span>

<span class="sd">    **Autoregressive Irregular**</span>

<span class="sd">    An autoregressive component (often used as a replacement for the white</span>
<span class="sd">    noise irregular term) can be specified as:</span>

<span class="sd">    .. math::</span>

<span class="sd">        \varepsilon_t = \rho(L) \varepsilon_{t-1} + \epsilon_t \\</span>
<span class="sd">        \epsilon_t \sim N(0, \sigma_\epsilon^2)</span>

<span class="sd">    In this case, the AR order is specified via the `autoregressive` keyword,</span>
<span class="sd">    and the autoregressive coefficients are estimated.</span>

<span class="sd">    Following the fitting of the model, the unobserved autoregressive component</span>
<span class="sd">    time series is available in the results class in the `autoregressive`</span>
<span class="sd">    attribute.</span>

<span class="sd">    **Regression effects**</span>

<span class="sd">    Exogenous regressors can be pass to the `exog` argument. The regression</span>
<span class="sd">    coefficients will be estimated by maximum likelihood unless</span>
<span class="sd">    `mle_regression=False`, in which case the regression coefficients will be</span>
<span class="sd">    included in the state vector where they are essentially estimated via</span>
<span class="sd">    recursive OLS.</span>

<span class="sd">    If the regression_coefficients are included in the state vector, the</span>
<span class="sd">    recursive estimates are available in the results class in the</span>
<span class="sd">    `regression_coefficients` attribute.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    .. [1] Durbin, James, and Siem Jan Koopman. 2012.</span>
<span class="sd">       Time Series Analysis by State Space Methods: Second Edition.</span>
<span class="sd">       Oxford University Press.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">level</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">trend</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">seasonal</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">freq_seasonal</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">cycle</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">autoregressive</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">irregular</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">stochastic_level</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">stochastic_trend</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">stochastic_seasonal</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">stochastic_freq_seasonal</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">stochastic_cycle</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">damped_cycle</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">cycle_period_bounds</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">mle_regression</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">use_exact_diffuse</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model_fitted_</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">level</span> <span class="o">=</span> <span class="n">level</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">trend</span> <span class="o">=</span> <span class="n">trend</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">seasonal</span> <span class="o">=</span> <span class="n">seasonal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">freq_seasonal</span> <span class="o">=</span> <span class="n">freq_seasonal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cycle</span> <span class="o">=</span> <span class="n">cycle</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoregressive</span> <span class="o">=</span> <span class="n">autoregressive</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">irregular</span> <span class="o">=</span> <span class="n">irregular</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stochastic_level</span> <span class="o">=</span> <span class="n">stochastic_level</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stochastic_trend</span> <span class="o">=</span> <span class="n">stochastic_trend</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stochastic_seasonal</span> <span class="o">=</span> <span class="n">stochastic_seasonal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stochastic_freq_seasonal</span> <span class="o">=</span> <span class="n">stochastic_freq_seasonal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stochastic_cycle</span> <span class="o">=</span> <span class="n">stochastic_cycle</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">damped_cycle</span> <span class="o">=</span> <span class="n">damped_cycle</span>  <span class="c1"># 減衰係数ρを乗じるか</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cycle_period_bounds</span> <span class="o">=</span> <span class="n">cycle_period_bounds</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mle_regression</span> <span class="o">=</span> <span class="n">mle_regression</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">use_exact_diffuse</span> <span class="o">=</span> <span class="n">use_exact_diffuse</span>

    <span class="c1"># =====================================================</span>
    <span class="c1"># Fit methods (filtering &amp; smoothing, and parameters)</span>
    <span class="c1"># =====================================================</span>
<div class="viewcode-block" id="LinearGaussianStateSpaceModel.fit"><a class="viewcode-back" href="../../../api/sandbox/tsa/ssm/index.html#sandbox.tsa.ssm.LinearGaussianStateSpaceModel.fit">[docs]</a>    <span class="k">def</span> <span class="nf">fit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Fit the model.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        X : array_like</span>
<span class="sd">            Training data on regressions. If no regression is defined,</span>
<span class="sd">            just y is to be defined.</span>
<span class="sd">        y : {array_like, None}, default</span>
<span class="sd">            Target values. If no regression is defined, just y is to be</span>
<span class="sd">            defined in the place of X.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        self : object</span>
<span class="sd">            Returns the instance itself.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># このモジュールで提供しているデータクラスに変換.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_</span> <span class="o">=</span> <span class="n">TimeSeriesModelData</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model_result_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_model_result</span><span class="p">(</span>
            <span class="n">endog</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">data_</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">exog</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">data_</span><span class="o">.</span><span class="n">X</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

    <span class="k">def</span> <span class="nf">_get_model_result</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">endog</span><span class="p">,</span> <span class="n">exog</span><span class="p">):</span>
        <span class="c1"># ToDo: util関数でimportしていなければエラー (または自動でインストール?) を返すメソッドを用意.</span>
        <span class="kn">from</span> <span class="nn">statsmodels.tsa.statespace.structural</span> <span class="kn">import</span> <span class="n">UnobservedComponents</span>

        <span class="c1"># ToDo: 下記のfitメソッドに合う引数も指定できるようにする.</span>
        <span class="n">model_result</span> <span class="o">=</span> <span class="n">UnobservedComponents</span><span class="p">(</span>
            <span class="n">endog</span><span class="o">=</span><span class="n">endog</span><span class="p">,</span>
            <span class="n">level</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">level</span><span class="p">,</span>
            <span class="n">trend</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">trend</span><span class="p">,</span>
            <span class="n">seasonal</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">seasonal</span><span class="p">,</span>
            <span class="n">freq_seasonal</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">freq_seasonal</span><span class="p">,</span>
            <span class="n">cycle</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cycle</span><span class="p">,</span>
            <span class="n">autoregressive</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">autoregressive</span><span class="p">,</span>
            <span class="n">exog</span><span class="o">=</span><span class="n">exog</span><span class="p">,</span>
            <span class="n">irregular</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">irregular</span><span class="p">,</span>
            <span class="n">stochastic_level</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">stochastic_level</span><span class="p">,</span>
            <span class="n">stochastic_trend</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">stochastic_trend</span><span class="p">,</span>
            <span class="n">stochastic_seasonal</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">stochastic_seasonal</span><span class="p">,</span>
            <span class="n">stochastic_freq_seasonal</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">stochastic_freq_seasonal</span><span class="p">,</span>
            <span class="n">stochastic_cycle</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">stochastic_cycle</span><span class="p">,</span>
            <span class="n">damped_cycle</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">damped_cycle</span><span class="p">,</span>
            <span class="n">cycle_period_bounds</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cycle_period_bounds</span><span class="p">,</span>
            <span class="n">mle_regression</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mle_regression</span><span class="p">,</span>
            <span class="n">use_exact_diffuse</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">use_exact_diffuse</span><span class="p">,</span>
        <span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">model_result</span>

<div class="viewcode-block" id="LinearGaussianStateSpaceModel.has_model_result"><a class="viewcode-back" href="../../../api/sandbox/tsa/ssm/index.html#sandbox.tsa.ssm.LinearGaussianStateSpaceModel.has_model_result">[docs]</a>    <span class="k">def</span> <span class="nf">has_model_result</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;Whether an instance has ``model_result_``.</span>

<span class="sd">        Some method needs ``model_result_`` that can be gained after</span>
<span class="sd">        :py:func:`fit &lt;sandbox.tsa.ssm.LinearGaussianState.fit&gt;`.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        result : bool</span>
<span class="sd">            If an instance has ``model_result_``, True. Otherwise, False.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;model_result_&quot;</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span></div>

    <span class="nd">@property</span>
<div class="viewcode-block" id="LinearGaussianStateSpaceModel.estimated_params_"><a class="viewcode-back" href="../../../api/sandbox/tsa/ssm/index.html#sandbox.tsa.ssm.LinearGaussianStateSpaceModel.estimated_params_">[docs]</a>    <span class="k">def</span> <span class="nf">estimated_params_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Estimated parameters.</span>

<span class="sd">        :py:class:`LinearGaussianState &lt;sandbox.tsa.ssm.LinearGaussianState&gt;` estimates (1) states parameters,</span>
<span class="sd">        (2) fixed parameters (e.g., fixed state variances, regression coefficients).</span>

<span class="sd">        This method returns (2) fixed parameters that are estimated in</span>
<span class="sd">        :py:func:`fit &lt;sandbox.tsa.ssm.LinearGaussianState.fit&gt;` as dict format.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        estimated_params : dict</span>
<span class="sd">            The estimated parameters which are other than state parameters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">estimated_params</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_model_result</span><span class="p">():</span>
            <span class="kn">import</span> <span class="nn">warnings</span>

            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;This method works after performing `fit`.&quot;</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">estimated_params</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
                <span class="nb">zip</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">model_result_</span><span class="o">.</span><span class="n">param_names</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">model_result_</span><span class="o">.</span><span class="n">params</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">estimated_params</span></div>

    <span class="nd">@property</span>
<div class="viewcode-block" id="LinearGaussianStateSpaceModel.fittedvalues_"><a class="viewcode-back" href="../../../api/sandbox/tsa/ssm/index.html#sandbox.tsa.ssm.LinearGaussianStateSpaceModel.fittedvalues_">[docs]</a>    <span class="k">def</span> <span class="nf">fittedvalues_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The fitted values of the model.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        fittedvalues : numpy.ndarray</span>
<span class="sd">            The fitted values to be estimated.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">fittedvalues</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_model_result</span><span class="p">():</span>
            <span class="kn">import</span> <span class="nn">warnings</span>

            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;This method works after performing `fit`.&quot;</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fittedvalues</span> <span class="o">=</span> <span class="n">get_1d_arr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model_result_</span><span class="o">.</span><span class="n">fittedvalues</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">fittedvalues</span></div>

    <span class="nd">@property</span>
<div class="viewcode-block" id="LinearGaussianStateSpaceModel.level_filtered_"><a class="viewcode-back" href="../../../api/sandbox/tsa/ssm/index.html#sandbox.tsa.ssm.LinearGaussianStateSpaceModel.level_filtered_">[docs]</a>    <span class="k">def</span> <span class="nf">level_filtered_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Filtered level component.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        level : {numpy.ndarray, None}</span>
<span class="sd">            Filtered level component.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_level</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s2">&quot;filtered&quot;</span><span class="p">)</span></div>

    <span class="nd">@property</span>
<div class="viewcode-block" id="LinearGaussianStateSpaceModel.level_"><a class="viewcode-back" href="../../../api/sandbox/tsa/ssm/index.html#sandbox.tsa.ssm.LinearGaussianStateSpaceModel.level_">[docs]</a>    <span class="k">def</span> <span class="nf">level_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Smoothed level component.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        level : {numpy.ndarray, None}</span>
<span class="sd">            Smoothed level component.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_level</span><span class="p">()</span></div>

    <span class="nd">@property</span>
<div class="viewcode-block" id="LinearGaussianStateSpaceModel.trend_filtered_"><a class="viewcode-back" href="../../../api/sandbox/tsa/ssm/index.html#sandbox.tsa.ssm.LinearGaussianStateSpaceModel.trend_filtered_">[docs]</a>    <span class="k">def</span> <span class="nf">trend_filtered_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Filtered trend component.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        trend : {numpy.ndarray, None}</span>
<span class="sd">            Filtered trend component.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_trend</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s2">&quot;filtered&quot;</span><span class="p">)</span></div>

    <span class="nd">@property</span>
<div class="viewcode-block" id="LinearGaussianStateSpaceModel.trend_"><a class="viewcode-back" href="../../../api/sandbox/tsa/ssm/index.html#sandbox.tsa.ssm.LinearGaussianStateSpaceModel.trend_">[docs]</a>    <span class="k">def</span> <span class="nf">trend_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Smoothed trend component.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        trend : {numpy.ndarray, None}</span>
<span class="sd">            Smoothed trend component.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_trend</span><span class="p">()</span></div>

    <span class="nd">@property</span>
<div class="viewcode-block" id="LinearGaussianStateSpaceModel.seasonal_filtered_"><a class="viewcode-back" href="../../../api/sandbox/tsa/ssm/index.html#sandbox.tsa.ssm.LinearGaussianStateSpaceModel.seasonal_filtered_">[docs]</a>    <span class="k">def</span> <span class="nf">seasonal_filtered_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Filtered seasonal component.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        seasonal : {numpy.ndarray, None}</span>
<span class="sd">            Filtered seasonal component.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_seasonal</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s2">&quot;filtered&quot;</span><span class="p">)</span></div>

    <span class="nd">@property</span>
<div class="viewcode-block" id="LinearGaussianStateSpaceModel.seasonal_"><a class="viewcode-back" href="../../../api/sandbox/tsa/ssm/index.html#sandbox.tsa.ssm.LinearGaussianStateSpaceModel.seasonal_">[docs]</a>    <span class="k">def</span> <span class="nf">seasonal_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Smoothed seasonal component.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        seasonal : {numpy.ndarray, None}</span>
<span class="sd">            Smoothed seasonal component.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_seasonal</span><span class="p">()</span></div>

    <span class="nd">@property</span>
<div class="viewcode-block" id="LinearGaussianStateSpaceModel.freq_seasonal_filtered_"><a class="viewcode-back" href="../../../api/sandbox/tsa/ssm/index.html#sandbox.tsa.ssm.LinearGaussianStateSpaceModel.freq_seasonal_filtered_">[docs]</a>    <span class="k">def</span> <span class="nf">freq_seasonal_filtered_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Filtered frequency domain seasonal component.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        freq_seasonal : {list[numpy.ndarray], None}</span>
<span class="sd">            Filtered frequency domain seasonal component</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_freq_seasonal</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s2">&quot;filtered&quot;</span><span class="p">)</span></div>

    <span class="nd">@property</span>
<div class="viewcode-block" id="LinearGaussianStateSpaceModel.freq_seasonal_"><a class="viewcode-back" href="../../../api/sandbox/tsa/ssm/index.html#sandbox.tsa.ssm.LinearGaussianStateSpaceModel.freq_seasonal_">[docs]</a>    <span class="k">def</span> <span class="nf">freq_seasonal_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Smoothed frequency domain seasonal component.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        freq_seasonal : {list[numpy.ndarray], None}</span>
<span class="sd">            Smoothed frequency domain seasonal component</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_freq_seasonal</span><span class="p">()</span></div>

    <span class="nd">@property</span>
<div class="viewcode-block" id="LinearGaussianStateSpaceModel.cycle_filtered_"><a class="viewcode-back" href="../../../api/sandbox/tsa/ssm/index.html#sandbox.tsa.ssm.LinearGaussianStateSpaceModel.cycle_filtered_">[docs]</a>    <span class="k">def</span> <span class="nf">cycle_filtered_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Filtered cycle component.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        cycle : {numpy.ndarray, None}</span>
<span class="sd">            Filtered cycle component.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cycle</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s2">&quot;filtered&quot;</span><span class="p">)</span></div>

    <span class="nd">@property</span>
<div class="viewcode-block" id="LinearGaussianStateSpaceModel.cycle_"><a class="viewcode-back" href="../../../api/sandbox/tsa/ssm/index.html#sandbox.tsa.ssm.LinearGaussianStateSpaceModel.cycle_">[docs]</a>    <span class="k">def</span> <span class="nf">cycle_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Smoothed cycle component.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        cycle : {numpy.ndarray, None}</span>
<span class="sd">            Smoothed cycle component.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cycle</span><span class="p">()</span></div>

    <span class="nd">@property</span>
<div class="viewcode-block" id="LinearGaussianStateSpaceModel.autoregressive_filtered_"><a class="viewcode-back" href="../../../api/sandbox/tsa/ssm/index.html#sandbox.tsa.ssm.LinearGaussianStateSpaceModel.autoregressive_filtered_">[docs]</a>    <span class="k">def</span> <span class="nf">autoregressive_filtered_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Filtered autoregressive component.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        autoregressive : {numpy.ndarray, None}</span>
<span class="sd">            Filtered autoregressive component.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_autoregressive</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s2">&quot;filtered&quot;</span><span class="p">)</span></div>

    <span class="nd">@property</span>
<div class="viewcode-block" id="LinearGaussianStateSpaceModel.autoregressive_"><a class="viewcode-back" href="../../../api/sandbox/tsa/ssm/index.html#sandbox.tsa.ssm.LinearGaussianStateSpaceModel.autoregressive_">[docs]</a>    <span class="k">def</span> <span class="nf">autoregressive_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Smoothed autoregressive component.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        autoregressive : {numpy.ndarray, None}</span>
<span class="sd">            Smoothed autoregressive component.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_autoregressive</span><span class="p">()</span></div>

    <span class="nd">@property</span>
<div class="viewcode-block" id="LinearGaussianStateSpaceModel.regression_filtered_"><a class="viewcode-back" href="../../../api/sandbox/tsa/ssm/index.html#sandbox.tsa.ssm.LinearGaussianStateSpaceModel.regression_filtered_">[docs]</a>    <span class="k">def</span> <span class="nf">regression_filtered_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Filtered regression component.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        regression : {numpy.ndarray, None}</span>
<span class="sd">            Filtered regression component.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_regression</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s2">&quot;filtered&quot;</span><span class="p">)</span></div>

    <span class="nd">@property</span>
<div class="viewcode-block" id="LinearGaussianStateSpaceModel.regression_"><a class="viewcode-back" href="../../../api/sandbox/tsa/ssm/index.html#sandbox.tsa.ssm.LinearGaussianStateSpaceModel.regression_">[docs]</a>    <span class="k">def</span> <span class="nf">regression_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Smoothed regression component.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        regression : {numpy.ndarray, None}</span>
<span class="sd">            Smoothed regression component.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_regression</span><span class="p">()</span></div>

<div class="viewcode-block" id="LinearGaussianStateSpaceModel.predict"><a class="viewcode-back" href="../../../api/sandbox/tsa/ssm/index.html#sandbox.tsa.ssm.LinearGaussianStateSpaceModel.predict">[docs]</a>    <span class="k">def</span> <span class="nf">predict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">is_pandas</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Predict using the model.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        X : {array-like, int}</span>
<span class="sd">            Design matrix expressing the regression dummies or variables in</span>
<span class="sd">            the period to be predicted. If no regression is defined in the model,</span>
<span class="sd">            the index expressing the period or the period steps to be predicted</span>
<span class="sd">            must be set.</span>
<span class="sd">        is_pandas: bool, optional</span>
<span class="sd">            If True, the return data type is pandas.Series. Otherwise, numpy.ndarray.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        predicted_mean : array-like</span>
<span class="sd">            Mean of predictive distribution of query points.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pred</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_prediction</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">is_pandas</span><span class="p">:</span>
            <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_</span><span class="o">.</span><span class="n">split_index_and_X_from_X_pred</span><span class="p">(</span><span class="n">X</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
                <span class="n">pred</span><span class="o">.</span><span class="n">predicted_mean</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;predicted_mean&quot;</span><span class="p">]</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">pred</span><span class="o">.</span><span class="n">predicted_mean</span></div>

<div class="viewcode-block" id="LinearGaussianStateSpaceModel.conf_int"><a class="viewcode-back" href="../../../api/sandbox/tsa/ssm/index.html#sandbox.tsa.ssm.LinearGaussianStateSpaceModel.conf_int">[docs]</a>    <span class="k">def</span> <span class="nf">conf_int</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.95</span><span class="p">,</span> <span class="n">is_pandas</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Compute the confidence interval.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        X : {array-like, int}</span>
<span class="sd">            Design matrix expressing the regression dummies or variables in</span>
<span class="sd">            the period to be predicted. If no regression is defined in the model,</span>
<span class="sd">            the index expressing the period or the period steps to be predicted</span>
<span class="sd">            must be set.</span>
<span class="sd">        alpha : float, optional</span>
<span class="sd">            The `alpha` level for the confidence interval. The default</span>
<span class="sd">            `alpha` = .95 returns a 95% confidence interval.</span>
<span class="sd">        is_pandas: bool, optional</span>
<span class="sd">            If True, the return data type is pandas.Series. Otherwise, numpy.ndarray.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        array_like</span>
<span class="sd">            The confidence intervals.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pred</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_prediction</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">is_pandas</span><span class="p">:</span>
            <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_</span><span class="o">.</span><span class="n">split_index_and_X_from_X_pred</span><span class="p">(</span><span class="n">X</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">a</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">alpha</span> <span class="o">*</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
                <span class="n">pred</span><span class="o">.</span><span class="n">conf_int</span><span class="p">(</span><span class="n">alpha</span><span class="o">=</span><span class="mi">1</span> <span class="o">-</span> <span class="n">alpha</span><span class="p">),</span>
                <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">,</span>
                <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;lower_</span><span class="si">{</span><span class="n">a</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;upper_</span><span class="si">{</span><span class="n">a</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">],</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">pred</span><span class="o">.</span><span class="n">conf_int</span><span class="p">(</span><span class="n">alpha</span><span class="o">=</span><span class="mi">1</span> <span class="o">-</span> <span class="n">alpha</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_get_prediction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">):</span>
        <span class="n">index</span><span class="p">,</span> <span class="n">exog</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_</span><span class="o">.</span><span class="n">split_index_and_X_from_X_pred</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
        <span class="n">start</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_</span><span class="o">.</span><span class="n">nobs</span>
        <span class="n">end</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_</span><span class="o">.</span><span class="n">nobs</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">index</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_result_</span><span class="o">.</span><span class="n">get_prediction</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="n">end</span><span class="p">,</span> <span class="n">exog</span><span class="o">=</span><span class="n">exog</span><span class="p">)</span>

<div class="viewcode-block" id="LinearGaussianStateSpaceModel.score"><a class="viewcode-back" href="../../../api/sandbox/tsa/ssm/index.html#sandbox.tsa.ssm.LinearGaussianStateSpaceModel.score">[docs]</a>    <span class="k">def</span> <span class="nf">score</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">scorer</span><span class="o">=</span><span class="s2">&quot;r2&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;Return the coefficient of determination of the prediction.</span>

<span class="sd">        The default coefficient of determination :math:`R^2` is defined as</span>
<span class="sd">        :math:`(1 - \\frac{u}{v})`, where :math:`u` is the residual</span>
<span class="sd">        sum of squares ``((y_true - y_pred)** 2).sum()`` and :math:`v`</span>
<span class="sd">        is the total sum of squares ``((y_true - y_true.mean()) ** 2).sum()``.</span>
<span class="sd">        The best possible score is 1.0, and it can be negative (because the</span>
<span class="sd">        model can be arbitrarily worse). A constant model that always predicts</span>
<span class="sd">        the expected value of `y`, disregarding the input features, would get</span>
<span class="sd">        a :math:`R^2` score of 0.0.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        X : {array-like, int}</span>
<span class="sd">            Design matrix expressing the regression dummies or variables in</span>
<span class="sd">            the period to be predicted. If no regression is defined in the model,</span>
<span class="sd">            the index expressing the period or the period steps to be predicted</span>
<span class="sd">            must be set.</span>
<span class="sd">        y : array-like</span>
<span class="sd">            True values for `X`.</span>
<span class="sd">        scorer : str, optional</span>
<span class="sd">            Expressing the type of the coefficient of determination.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        score : float</span>
<span class="sd">            :math:`R^2` of ``self.predict(X)``.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">score</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">LinearGaussianStateSpaceModel</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">score</span><span class="p">(</span>
            <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">scorer</span><span class="o">=</span><span class="n">scorer</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">score</span></div>

    <span class="nd">@property</span>
<div class="viewcode-block" id="LinearGaussianStateSpaceModel.components_name_"><a class="viewcode-back" href="../../../api/sandbox/tsa/ssm/index.html#sandbox.tsa.ssm.LinearGaussianStateSpaceModel.components_name_">[docs]</a>    <span class="k">def</span> <span class="nf">components_name_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return component names that are implemented in a defined model.&quot;&quot;&quot;</span>
        <span class="n">components_name</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">level</span><span class="p">:</span>
            <span class="n">components_name</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;level_&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">trend</span><span class="p">:</span>
            <span class="n">components_name</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;trend_&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">seasonal</span><span class="p">:</span>
            <span class="n">components_name</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;seasonal_&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">freq_seasonal</span><span class="p">:</span>
            <span class="n">components_name</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;freq_seasonal_&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cycle</span><span class="p">:</span>
            <span class="n">components_name</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;cycle_&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">autoregressive</span><span class="p">:</span>
            <span class="n">components_name</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;autoregressive_&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">components_name</span></div>

    <span class="k">def</span> <span class="nf">_predicted_state</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">):</span>
        <span class="n">predicted_state</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_model_result</span><span class="p">():</span>
            <span class="n">predicted_state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_prediction</span><span class="p">(</span>
                <span class="n">X</span>
            <span class="p">)</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">prediction_results</span><span class="o">.</span><span class="n">results</span><span class="o">.</span><span class="n">predicted_state</span>
        <span class="k">return</span> <span class="n">predicted_state</span>

<div class="viewcode-block" id="LinearGaussianStateSpaceModel.level_predicted_"><a class="viewcode-back" href="../../../api/sandbox/tsa/ssm/index.html#sandbox.tsa.ssm.LinearGaussianStateSpaceModel.level_predicted_">[docs]</a>    <span class="k">def</span> <span class="nf">level_predicted_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Predicted level component.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        X : {array-like, int}</span>
<span class="sd">            Design matrix expressing the regression dummies or variables in</span>
<span class="sd">            the period to be predicted. If no regression is defined in the model,</span>
<span class="sd">            the index expressing the period or the period steps to be predicted</span>
<span class="sd">            must be set.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        level : {numpy.ndarray, None}</span>
<span class="sd">            Predicted level component.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_level</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s2">&quot;predicted&quot;</span><span class="p">,</span> <span class="n">X</span><span class="o">=</span><span class="n">X</span><span class="p">)</span></div>

<div class="viewcode-block" id="LinearGaussianStateSpaceModel.trend_predicted_"><a class="viewcode-back" href="../../../api/sandbox/tsa/ssm/index.html#sandbox.tsa.ssm.LinearGaussianStateSpaceModel.trend_predicted_">[docs]</a>    <span class="k">def</span> <span class="nf">trend_predicted_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Predicted trend component.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        X : {array-like, int}</span>
<span class="sd">            Design matrix expressing the regression dummies or variables in</span>
<span class="sd">            the period to be predicted. If no regression is defined in the model,</span>
<span class="sd">            the index expressing the period or the period steps to be predicted</span>
<span class="sd">            must be set.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        trend : {numpy.ndarray, None}</span>
<span class="sd">            Predicted trend component.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_trend</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s2">&quot;predicted&quot;</span><span class="p">,</span> <span class="n">X</span><span class="o">=</span><span class="n">X</span><span class="p">)</span></div>

<div class="viewcode-block" id="LinearGaussianStateSpaceModel.seasonal_predicted_"><a class="viewcode-back" href="../../../api/sandbox/tsa/ssm/index.html#sandbox.tsa.ssm.LinearGaussianStateSpaceModel.seasonal_predicted_">[docs]</a>    <span class="k">def</span> <span class="nf">seasonal_predicted_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Predicted seasonal component.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        X : {array-like, int}</span>
<span class="sd">            Design matrix expressing the regression dummies or variables in</span>
<span class="sd">            the period to be predicted. If no regression is defined in the model,</span>
<span class="sd">            the index expressing the period or the period steps to be predicted</span>
<span class="sd">            must be set.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        seasonal : {numpy.ndarray, None}</span>
<span class="sd">            Predicted seasonal component.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_seasonal</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s2">&quot;predicted&quot;</span><span class="p">,</span> <span class="n">X</span><span class="o">=</span><span class="n">X</span><span class="p">)</span></div>

<div class="viewcode-block" id="LinearGaussianStateSpaceModel.freq_seasonal_predicted_"><a class="viewcode-back" href="../../../api/sandbox/tsa/ssm/index.html#sandbox.tsa.ssm.LinearGaussianStateSpaceModel.freq_seasonal_predicted_">[docs]</a>    <span class="k">def</span> <span class="nf">freq_seasonal_predicted_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Predicted frequency domain seasonal component.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        X : {array-like, int}</span>
<span class="sd">            Design matrix expressing the regression dummies or variables in</span>
<span class="sd">            the period to be predicted. If no regression is defined in the model,</span>
<span class="sd">            the index expressing the period or the period steps to be predicted</span>
<span class="sd">            must be set.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        freq_seasonal : {list[numpy.ndarray], None}</span>
<span class="sd">            Predicted frequency domain seasonal component.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_freq_seasonal</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s2">&quot;predicted&quot;</span><span class="p">,</span> <span class="n">X</span><span class="o">=</span><span class="n">X</span><span class="p">)</span></div>

<div class="viewcode-block" id="LinearGaussianStateSpaceModel.cycle_predicted_"><a class="viewcode-back" href="../../../api/sandbox/tsa/ssm/index.html#sandbox.tsa.ssm.LinearGaussianStateSpaceModel.cycle_predicted_">[docs]</a>    <span class="k">def</span> <span class="nf">cycle_predicted_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Predicted cycle component.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        X : {array-like, int}</span>
<span class="sd">            Design matrix expressing the regression dummies or variables in</span>
<span class="sd">            the period to be predicted. If no regression is defined in the model,</span>
<span class="sd">            the index expressing the period or the period steps to be predicted</span>
<span class="sd">            must be set.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        cycle : {numpy.ndarray, None}</span>
<span class="sd">            Predicted cycle component.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_freq_seasonal</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s2">&quot;predicted&quot;</span><span class="p">,</span> <span class="n">X</span><span class="o">=</span><span class="n">X</span><span class="p">)</span></div>

<div class="viewcode-block" id="LinearGaussianStateSpaceModel.autoregressive_predicted_"><a class="viewcode-back" href="../../../api/sandbox/tsa/ssm/index.html#sandbox.tsa.ssm.LinearGaussianStateSpaceModel.autoregressive_predicted_">[docs]</a>    <span class="k">def</span> <span class="nf">autoregressive_predicted_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Predicted autoregressive component.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        X : {array-like, int}</span>
<span class="sd">            Design matrix expressing the regression dummies or variables in</span>
<span class="sd">            the period to be predicted. If no regression is defined in the model,</span>
<span class="sd">            the index expressing the period or the period steps to be predicted</span>
<span class="sd">            must be set.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        autoregressive : {numpy.ndarray, None}</span>
<span class="sd">            Predicted autoregressive component.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_autoregressive</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s2">&quot;predicted&quot;</span><span class="p">,</span> <span class="n">X</span><span class="o">=</span><span class="n">X</span><span class="p">)</span></div>

<div class="viewcode-block" id="LinearGaussianStateSpaceModel.regression_predicted_"><a class="viewcode-back" href="../../../api/sandbox/tsa/ssm/index.html#sandbox.tsa.ssm.LinearGaussianStateSpaceModel.regression_predicted_">[docs]</a>    <span class="k">def</span> <span class="nf">regression_predicted_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Predicted regression component.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        X : {array-like, int}</span>
<span class="sd">            Design matrix expressing the regression dummies or variables in</span>
<span class="sd">            the period to be predicted. If no regression is defined in the model,</span>
<span class="sd">            the index expressing the period or the period steps to be predicted</span>
<span class="sd">            must be set.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        regression : {numpy.ndarray, None}</span>
<span class="sd">            Predicted regression component.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_regression</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s2">&quot;predicted&quot;</span><span class="p">,</span> <span class="n">X</span><span class="o">=</span><span class="n">X</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_level</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;smoothed&quot;</span><span class="p">,</span> <span class="n">X</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">out</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_model_result</span><span class="p">():</span>
            <span class="n">spec</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_result_</span><span class="o">.</span><span class="n">specification</span>
            <span class="k">if</span> <span class="n">spec</span><span class="o">.</span><span class="n">level</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">which</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;filtered&quot;</span><span class="p">,</span> <span class="s2">&quot;smoothed&quot;</span><span class="p">]:</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_result_</span><span class="o">.</span><span class="n">level</span><span class="p">[</span><span class="n">which</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">which</span> <span class="o">==</span> <span class="s2">&quot;predicted&quot;</span><span class="p">:</span>
                    <span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="n">predicted_state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_predicted_state</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">predicted_state</span><span class="p">[</span><span class="n">offset</span><span class="p">,</span> <span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">out</span>

    <span class="k">def</span> <span class="nf">_trend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;smoothed&quot;</span><span class="p">,</span> <span class="n">X</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">out</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_model_result</span><span class="p">():</span>
            <span class="n">spec</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_result_</span><span class="o">.</span><span class="n">specification</span>
            <span class="k">if</span> <span class="n">spec</span><span class="o">.</span><span class="n">trend</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">which</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;filtered&quot;</span><span class="p">,</span> <span class="s2">&quot;smoothed&quot;</span><span class="p">]:</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_result_</span><span class="o">.</span><span class="n">trend</span><span class="p">[</span><span class="n">which</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">which</span> <span class="o">==</span> <span class="s2">&quot;predicted&quot;</span><span class="p">:</span>
                    <span class="n">offset</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">spec</span><span class="o">.</span><span class="n">level</span><span class="p">)</span>
                    <span class="n">predicted_state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_predicted_state</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">predicted_state</span><span class="p">[</span><span class="n">offset</span><span class="p">,</span> <span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">out</span>

    <span class="k">def</span> <span class="nf">_seasonal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;smoothed&quot;</span><span class="p">,</span> <span class="n">X</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">out</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_model_result</span><span class="p">():</span>
            <span class="n">spec</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_result_</span><span class="o">.</span><span class="n">specification</span>
            <span class="k">if</span> <span class="n">spec</span><span class="o">.</span><span class="n">seasonal</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">which</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;filtered&quot;</span><span class="p">,</span> <span class="s2">&quot;smoothed&quot;</span><span class="p">]:</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_result_</span><span class="o">.</span><span class="n">seasonal</span><span class="p">[</span><span class="n">which</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">which</span> <span class="o">==</span> <span class="s2">&quot;predicted&quot;</span><span class="p">:</span>
                    <span class="n">offset</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">spec</span><span class="o">.</span><span class="n">trend</span> <span class="o">+</span> <span class="n">spec</span><span class="o">.</span><span class="n">level</span><span class="p">)</span>
                    <span class="n">predicted_state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_predicted_state</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">predicted_state</span><span class="p">[</span><span class="n">offset</span><span class="p">,</span> <span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">out</span>

    <span class="k">def</span> <span class="nf">_freq_seasonal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;smoothed&quot;</span><span class="p">,</span> <span class="n">X</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">out</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_model_result</span><span class="p">():</span>
            <span class="n">spec</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_result_</span><span class="o">.</span><span class="n">specification</span>
            <span class="k">if</span> <span class="n">spec</span><span class="o">.</span><span class="n">freq_seasonal</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">which</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;filtered&quot;</span><span class="p">,</span> <span class="s2">&quot;smoothed&quot;</span><span class="p">]:</span>
                    <span class="n">n_freq_seasonal</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model_result_</span><span class="o">.</span><span class="n">freq_seasonal</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_freq_seasonal</span><span class="p">):</span>
                        <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_result_</span><span class="o">.</span><span class="n">freq_seasonal</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">which</span><span class="p">]</span>
                        <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">which</span> <span class="o">==</span> <span class="s2">&quot;predicted&quot;</span><span class="p">:</span>
                    <span class="n">predicted_state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_predicted_state</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
                    <span class="n">previous_states_offset</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span>
                        <span class="n">spec</span><span class="o">.</span><span class="n">trend</span>
                        <span class="o">+</span> <span class="n">spec</span><span class="o">.</span><span class="n">level</span>
                        <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_result_</span><span class="o">.</span><span class="n">_k_states_by_type</span><span class="p">[</span><span class="s2">&quot;seasonal&quot;</span><span class="p">]</span>
                    <span class="p">)</span>
                    <span class="n">previous_f_seas_offset</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="k">for</span> <span class="n">ix</span><span class="p">,</span> <span class="n">h</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">spec</span><span class="o">.</span><span class="n">freq_seasonal_harmonics</span><span class="p">):</span>
                        <span class="n">offset</span> <span class="o">=</span> <span class="n">previous_states_offset</span> <span class="o">+</span> <span class="n">previous_f_seas_offset</span>
                        <span class="n">states_in_sum</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">h</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
                        <span class="n">item</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span>
                            <span class="p">[</span><span class="n">predicted_state</span><span class="p">[</span><span class="n">offset</span> <span class="o">+</span> <span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">states_in_sum</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span>
                        <span class="p">)</span>
                        <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
                        <span class="n">previous_f_seas_offset</span> <span class="o">+=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">h</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">out</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_cycle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;smoothed&quot;</span><span class="p">,</span> <span class="n">X</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">out</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_model_result</span><span class="p">():</span>
            <span class="n">spec</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_result_</span><span class="o">.</span><span class="n">specification</span>
            <span class="k">if</span> <span class="n">spec</span><span class="o">.</span><span class="n">cycle</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">which</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;filtered&quot;</span><span class="p">,</span> <span class="s2">&quot;smoothed&quot;</span><span class="p">]:</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_result_</span><span class="o">.</span><span class="n">cycle</span><span class="p">[</span><span class="n">which</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">which</span> <span class="o">==</span> <span class="s2">&quot;predicted&quot;</span><span class="p">:</span>
                    <span class="n">offset</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span>
                        <span class="n">spec</span><span class="o">.</span><span class="n">trend</span>
                        <span class="o">+</span> <span class="n">spec</span><span class="o">.</span><span class="n">level</span>
                        <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_result_</span><span class="o">.</span><span class="n">_k_states_by_type</span><span class="p">[</span><span class="s2">&quot;seasonal&quot;</span><span class="p">]</span>
                        <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_result_</span><span class="o">.</span><span class="n">_k_states_by_type</span><span class="p">[</span><span class="s2">&quot;freq_seasonal&quot;</span><span class="p">]</span>
                    <span class="p">)</span>
                    <span class="n">predicted_state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_predicted_state</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">predicted_state</span><span class="p">[</span><span class="n">offset</span><span class="p">,</span> <span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">out</span>

    <span class="k">def</span> <span class="nf">_autoregressive</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;smoothed&quot;</span><span class="p">,</span> <span class="n">X</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">out</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_model_result</span><span class="p">():</span>
            <span class="n">spec</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_result_</span><span class="o">.</span><span class="n">specification</span>
            <span class="k">if</span> <span class="n">spec</span><span class="o">.</span><span class="n">autoregressive</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">which</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;filtered&quot;</span><span class="p">,</span> <span class="s2">&quot;smoothed&quot;</span><span class="p">]:</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_result_</span><span class="o">.</span><span class="n">autoregressive</span><span class="p">[</span><span class="n">which</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">which</span> <span class="o">==</span> <span class="s2">&quot;predicted&quot;</span><span class="p">:</span>
                    <span class="n">offset</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span>
                        <span class="n">spec</span><span class="o">.</span><span class="n">trend</span>
                        <span class="o">+</span> <span class="n">spec</span><span class="o">.</span><span class="n">level</span>
                        <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_result_</span><span class="o">.</span><span class="n">_k_states_by_type</span><span class="p">[</span><span class="s2">&quot;seasonal&quot;</span><span class="p">]</span>
                        <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_result_</span><span class="o">.</span><span class="n">_k_states_by_type</span><span class="p">[</span><span class="s2">&quot;freq_seasonal&quot;</span><span class="p">]</span>
                        <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_result_</span><span class="o">.</span><span class="n">_k_states_by_type</span><span class="p">[</span><span class="s2">&quot;cycle&quot;</span><span class="p">]</span>
                    <span class="p">)</span>
                    <span class="n">predicted_state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_predicted_state</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">predicted_state</span><span class="p">[</span><span class="n">offset</span><span class="p">,</span> <span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">out</span>

    <span class="k">def</span> <span class="nf">_regression</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;smoothed&quot;</span><span class="p">,</span> <span class="n">X</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">out</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_model_result</span><span class="p">():</span>
            <span class="n">spec</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_result_</span><span class="o">.</span><span class="n">specification</span>
            <span class="k">if</span> <span class="n">spec</span><span class="o">.</span><span class="n">regression</span><span class="p">:</span>
                <span class="c1"># mle_regression = True のとき, 最尤推定法によって回帰係数を推定しているため,</span>
                <span class="c1"># 状態変数を格納している配列には保存されていない.</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">spec</span><span class="o">.</span><span class="n">mle_regression</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">which</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;filtered&quot;</span><span class="p">,</span> <span class="s2">&quot;smoothed&quot;</span><span class="p">]:</span>
                        <span class="n">out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_result_</span><span class="o">.</span><span class="n">regression_coefficients</span><span class="p">[</span><span class="n">which</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">which</span> <span class="o">==</span> <span class="s2">&quot;predicted&quot;</span><span class="p">:</span>
                        <span class="n">offset</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span>
                            <span class="n">spec</span><span class="o">.</span><span class="n">trend</span>
                            <span class="o">+</span> <span class="n">spec</span><span class="o">.</span><span class="n">level</span>
                            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_result_</span><span class="o">.</span><span class="n">_k_states_by_type</span><span class="p">[</span><span class="s2">&quot;seasonal&quot;</span><span class="p">]</span>
                            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_result_</span><span class="o">.</span><span class="n">_k_states_by_type</span><span class="p">[</span><span class="s2">&quot;freq_seasonal&quot;</span><span class="p">]</span>
                            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_result_</span><span class="o">.</span><span class="n">_k_states_by_type</span><span class="p">[</span><span class="s2">&quot;cycle&quot;</span><span class="p">]</span>
                            <span class="o">+</span> <span class="n">spec</span><span class="o">.</span><span class="n">ar_order</span>
                        <span class="p">)</span>
                        <span class="n">start</span> <span class="o">=</span> <span class="n">offset</span>
                        <span class="n">end</span> <span class="o">=</span> <span class="n">offset</span> <span class="o">+</span> <span class="n">spec</span><span class="o">.</span><span class="n">k_exog</span>
                        <span class="n">predicted_state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_predicted_state</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
                        <span class="n">out</span> <span class="o">=</span> <span class="n">predicted_state</span><span class="p">[</span><span class="n">start</span><span class="p">:</span><span class="n">end</span><span class="p">,</span> <span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">coefficient</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">spec</span><span class="o">.</span><span class="n">k_exog</span><span class="p">)</span>
                    <span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">estimated_params_</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                        <span class="k">if</span> <span class="s2">&quot;beta.&quot;</span> <span class="ow">in</span> <span class="n">k</span><span class="p">:</span>
                            <span class="n">coefficient</span><span class="p">[</span><span class="n">offset</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
                            <span class="n">offset</span> <span class="o">+=</span> <span class="mi">1</span>

                    <span class="c1"># NumPy において `*` はアダマール積</span>
                    <span class="c1"># ToDo: 下ではdata_.Xがnumpyを想定しているが, そもそもTimeSeriesModelDataの標準スタイルをnumpyにするか再検討.</span>
                    <span class="k">if</span> <span class="n">which</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;filtered&quot;</span><span class="p">,</span> <span class="s2">&quot;smoothed&quot;</span><span class="p">]:</span>
                        <span class="n">out</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_</span><span class="o">.</span><span class="n">X</span> <span class="o">*</span> <span class="n">coefficient</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>
                    <span class="k">if</span> <span class="n">which</span> <span class="o">==</span> <span class="s2">&quot;predicted&quot;</span><span class="p">:</span>
                        <span class="n">exog</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_</span><span class="o">.</span><span class="n">split_index_and_X_from_X_pred</span><span class="p">(</span><span class="n">X</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
                        <span class="n">out</span> <span class="o">=</span> <span class="p">(</span><span class="n">exog</span> <span class="o">*</span> <span class="n">coefficient</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>
        <span class="k">return</span> <span class="n">out</span></div>
</pre></div>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By sndpgm<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>